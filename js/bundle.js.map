{"version":3,"file":"bundle.js","sources":["../../src/js/utils.js","../../src/js/toggler.js","../../src/js/video.js"],"sourcesContent":["export const $ = (selector, elem = document) => elem.querySelector(selector);\n\nexport const $$ = (selector, elem = document) => Array.from(elem.querySelectorAll(selector));\n\nexport const on = (elem, eventType, cb) => elem.addEventListener(eventType, cb);\n\nexport const decodeHtml = (input) => {\n  const e = document.createElement('div');\n  e.innerHTML = input;\n  return e.childNodes.length === 0 ? '' : e.childNodes[0].nodeValue;\n}","import { $$ } from './utils';\n\nclass Toggler {\n  constructor(elem) {\n    this.elem = elem;\n    this.target = this.getTarget(this.elem);\n\n    this.activeClass = 'is-toggled';\n    this.enabledClass = 'has-toggler';\n\n    this.handleElemClick = this.handleElemClick.bind(this);\n\n    this.init();\n  }\n\n  init() {\n    if (!this.target) {\n      return;\n    }\n\n    this.addListeners();\n    this.elem.classList.add(this.enabledClass);\n    this.target.classList.add(this.enabledClass);\n  }\n\n  addListeners() {\n    this.elem.addEventListener('click', this.handleElemClick);\n    this.elem.addEventListener('keydown', this.handleElemKeyDown);\n  }\n\n  handleElemKeyDown = (e) => {\n    if(e.key === \" \" || e.key === \"Spacebar\") {\n      e.preventDefault();\n      this.toggle();\n    }\n  }\n\n  handleElemClick = (e) => {\n    e.preventDefault();\n    this.toggle();\n  }\n\n  getTarget(elem) {\n    const selector = elem.getAttribute('data-toggle-target');\n    const target = document.querySelector(selector);\n    return target;\n  }\n\n  open(elem, target) {\n    if(target) {\n      target.classList.add(this.activeClass);\n    }\n\n    if(elem) {\n      elem.classList.add(this.activeClass);\n      this.setAriaExpanded(elem, true);\n    }\n  }\n\n  setAriaExpanded(elem, state) {\n    if(elem.hasAttribute('aria-expanded')) {\n      elem.setAttribute('aria-expanded', String(state));\n    }\n  }\n\n  close(elem, target) {\n    if(target) {\n      target.classList.remove(this.activeClass);\n    }\n\n    if(elem) {\n      elem.classList.remove(this.activeClass);\n      this.setAriaExpanded(elem, false);\n    }\n  }\n\n  isToggled(elem) {\n    return elem.classList.contains(this.activeClass);\n  }\n\n  toggle() {\n    if(!this.isToggled(this.target)) {\n      return this.open(this.elem, this.target);\n    }\n    this.close(this.elem, this.target);\n  }\n}\n\nconst togglers = $$('[data-toggle-target]');\n\ntogglers.forEach((elem) => new Toggler(elem));\n\nexport default Toggler;","import {decodeHtml, on, $, $$} from './utils';\n\nclass VideoSwap {\n  constructor(elem) {\n    this.elem = elem;\n    this.content = $('.js-video-content', elem);\n    this.link = $('.js-video-link', elem);\n    this.iframe = elem.getAttribute('data-video');\n\n    this.activeClass = 'has-video';\n\n    this.init();\n  }\n\n  init() {\n    this.addListeners();\n  }\n\n  addListeners() {\n    if(this.link) {\n      console.log(this.link);\n      on(this.link, 'click', this.handleVideoEmbedClick);\n      on(this.link, 'keydown', this.handleKeyUp);\n    }\n  }\n\n  showVideo() {\n    this.elem.classList.add(this.activeClass);\n\n    if(!this.iframe) {\n      console.warn('No data-video set for video', this.elem);\n      return;\n    }\n\n    const html = decodeHtml(this.iframe);\n    \n    if (this.content) {\n      console.log(this.content);\n      this.content.innerHTML = html || this.iframe;\n    }\n  }\n\n  handleKeyUp = (e) => {\n    if(e.key === \" \" || e.key === \"Spacebar\") {\n      e.preventDefault();\n      this.showVideo();\n    }\n  };\n\n  handleVideoEmbedClick = (e) => {\n    e.preventDefault();\n    this.showVideo();\n  };\n}\n\nconst elem = $$('.js-video');\nconsole.log(elem);\nelem.forEach((elem) => new VideoSwap(elem));\n\nexport default VideoSwap;"],"names":["$","selector","elem","document","querySelector","$$","Array","from","querySelectorAll","on","eventType","cb","addEventListener","Toggler","constructor","e","key","preventDefault","toggle","target","this","getTarget","activeClass","enabledClass","handleElemClick","bind","init","addListeners","classList","add","handleElemKeyDown","getAttribute","open","setAriaExpanded","state","hasAttribute","setAttribute","String","close","remove","isToggled","contains","togglers","forEach","VideoSwap","showVideo","content","link","iframe","console","log","handleVideoEmbedClick","handleKeyUp","html","input","createElement","innerHTML","childNodes","length","nodeValue","decodeHtml","warn"],"mappings":"yBAAiB,SAAJA,EAAKC,OAAUC,yDAAOC,gBAAaD,EAAKE,cAAcH,GAEjD,SAALI,EAAMJ,OAAUC,yDAAOC,gBAAaG,MAAMC,KAAKL,EAAKM,iBAAiBP,IAE3E,MAAMQ,EAAK,CAACP,EAAMQ,EAAWC,IAAOT,EAAKU,iBAAiBF,EAAWC,iICFtEE,EACJC,YAAYZ,8BA2BSa,IACN,MAAVA,EAAEC,KAAyB,aAAVD,EAAEC,MACpBD,EAAEE,sBACGC,qCAIUH,IACjBA,EAAEE,sBACGC,gBAnCAhB,KAAOA,OACPiB,OAASC,KAAKC,UAAUD,KAAKlB,WAE7BoB,YAAc,kBACdC,aAAe,mBAEfC,gBAAkBJ,KAAKI,gBAAgBC,KAAKL,WAE5CM,OAGPA,OACON,KAAKD,cAILQ,oBACAzB,KAAK0B,UAAUC,IAAIT,KAAKG,mBACxBJ,OAAOS,UAAUC,IAAIT,KAAKG,eAGjCI,oBACOzB,KAAKU,iBAAiB,QAASQ,KAAKI,sBACpCtB,KAAKU,iBAAiB,UAAWQ,KAAKU,mBAe7CT,UAAUnB,GACFD,EAAWC,EAAK6B,aAAa,6BACpB5B,SAASC,cAAcH,GAIxC+B,KAAK9B,EAAMiB,GACNA,GACDA,EAAOS,UAAUC,IAAIT,KAAKE,aAGzBpB,IACDA,EAAK0B,UAAUC,IAAIT,KAAKE,kBACnBW,gBAAgB/B,GAAM,IAI/B+B,gBAAgB/B,EAAMgC,GACjBhC,EAAKiC,aAAa,kBACnBjC,EAAKkC,aAAa,gBAAiBC,OAAOH,IAI9CI,MAAMpC,EAAMiB,GACPA,GACDA,EAAOS,UAAUW,OAAOnB,KAAKE,aAG5BpB,IACDA,EAAK0B,UAAUW,OAAOnB,KAAKE,kBACtBW,gBAAgB/B,GAAM,IAI/BsC,UAAUtC,UACDA,EAAK0B,UAAUa,SAASrB,KAAKE,aAGtCJ,aACME,KAAKoB,UAAUpB,KAAKD,eACfC,KAAKY,KAAKZ,KAAKlB,KAAMkB,KAAKD,aAE9BmB,MAAMlB,KAAKlB,KAAMkB,KAAKD,SAI/B,MAAMuB,EAAWrC,EAAG,wBAEpBqC,EAASC,QAASzC,GAAS,IAAIW,EAAQX,UCxFjC0C,EACJ9B,YAAYZ,wBAuCGa,IACA,MAAVA,EAAEC,KAAyB,aAAVD,EAAEC,MACpBD,EAAEE,sBACG4B,8CAIgB9B,IACvBA,EAAEE,sBACG4B,mBA/CA3C,KAAOA,OACP4C,QAAU9C,EAAE,oBAAqBE,QACjC6C,KAAO/C,EAAE,iBAAkBE,QAC3B8C,OAAS9C,EAAK6B,aAAa,mBAE3BT,YAAc,iBAEdI,OAGPA,YACOC,eAGPA,eACKP,KAAK2B,OACNE,QAAQC,IAAI9B,KAAK2B,MACjBtC,EAAGW,KAAK2B,KAAM,QAAS3B,KAAK+B,uBAC5B1C,EAAGW,KAAK2B,KAAM,UAAW3B,KAAKgC,cAIlCP,gBAQQQ,OAPDnD,KAAK0B,UAAUC,IAAIT,KAAKE,aAEzBF,KAAK4B,QAKHK,GF5BiBC,UACnBvC,EAAIZ,SAASoD,cAAc,cACjCxC,EAAEyC,UAAYF,EACiB,IAAxBvC,EAAE0C,WAAWC,OAAe,GAAK3C,EAAE0C,WAAW,GAAGE,WEyBzCC,CAAWxC,KAAK4B,QAEzB5B,KAAK0B,UACPG,QAAQC,IAAI9B,KAAK0B,cACZA,QAAQU,UAAYH,GAAQjC,KAAK4B,SARtCC,QAAQY,KAAK,8BAA+BzC,KAAKlB,OAyBvD,MAAMA,EAAOG,EAAG,aAChB4C,QAAQC,IAAIhD,GACZA,EAAKyC,QAASzC,GAAS,IAAI0C,EAAU1C"}